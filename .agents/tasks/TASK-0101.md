# TASK-0101: Shared line access gate (MVP) — state machine (no voice hot-path planning)

Status: NOT STARTED   
Owner: Codex Agent (Access)

Feature flag: `VOZ_FEATURE_ACCESS_GATE` (default OFF)

## Goal
Implement the shared-line access gate that:
- serves general info until keyword “business code”
- then collects `tenant_id` + 8-digit access code
- supports first-time owner registration stub (caller id + email + zip) and forces password change (MVP-safe minimum)

This is **NOT** Flow A stream work. This is an out-of-band HTTP feature that the voice/whatsapp/web engines can call.

## Constraints (non-negotiable)
- Only modify: `features/access_gate.py` (and optional test)
- No cross-feature imports. Only stdlib + `core/*`.
- Debug logs gated behind `VOZLIA_DEBUG=1` only.
`
## Deliverables
- Minimal HTTP ENDPOINTS:
  - `POST /access/start`  -> returns session token + next prompt
  - `POST /access/step`    -> accepts {session_token, text}, returns next prompt or completion
- Deterministic FSM: INFO -> AWAIT_BUSINESS_CODE_KEYWORD -> AWAIT_TENANT_ID -> AWAIT_ACCESS_CODE
- Validation:
   - tenant_id: stripped, alnameric+[_-] only
  - access_code: exactly 8 digits

 ## FEATURE contract
Export `FEATURE` with `enabled_env="VOZ_FEATURE_ACCESS_GATE"`.

## selftests()
Deterministic happy path:
 - keyword ’ tenant_id → 8-digit code
Invalid code rejection test. Route mounting off/vs on test.

## security_checks()
- default OFF unless env truthy
- no tenant-scoped actions before tenant_id complete

`
## Acceptance
```bash
python -m compileall core features scripts main.py
python -m ruff check core features scripts tests main.py
pytest -q
VOZ_FEATURE_ADMIN_QUALITY=1 VOZ_FEATURE_SAMPLE=1 python scripts/run_regression.py
```
Rollback: VOZ_FEATURE_ACCESS_GATE=0
